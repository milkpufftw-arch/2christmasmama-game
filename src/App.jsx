import React, { useState, useEffect, useMemo, useRef } from 'react';
import { 
  Snowflake, 
  Gift, 
  TreePine, 
  Wine, 
  ShieldAlert, 
  Activity, 
  Brain, 
  Heart, 
  Eye, 
  Share2, 
  RefreshCw, 
  Play, 
  Upload, 
  ChevronRight, 
  Sparkles,
  CandyCane,
  Star,
  Bell
} from 'lucide-react';

// --- Èõ™Ëä±ËÉåÊôØÁâπÊïàÁµÑ‰ª∂ ---
const SnowEffect = () => {
  return (
    <div className="fixed inset-0 pointer-events-none z-0 overflow-hidden" aria-hidden="true">
      {[...Array(30)].map((_, i) => (
        <div
          key={i}
          className="absolute text-white/40 animate-fall drop-shadow-[0_0_5px_rgba(255,255,255,0.8)]"
          style={{
            left: `${Math.random() * 100}%`,
            top: `-${Math.random() * 20}%`,
            animationDuration: `${Math.random() * 10 + 8}s`,
            animationDelay: `${Math.random() * 5}s`,
            fontSize: ${Math.random() * 10 + 4}px
          }}
        >
          ‚ùÑ
        </div>
      ))}
      <style jsx>{`
        @keyframes fall {
          0% { transform: translateY(-10vh) rotate(0deg); opacity: 0; }
          20% { opacity: 0.8; }
          100% { transform: translateY(110vh) rotate(360deg); opacity: 0; }
        }
        .animate-fall {
          animation-name: fall;
          animation-timing-function: linear;
          animation-iteration-count: infinite;
        }
      `}</style>
    </div>
  );
};

export default function App() {
  const [step, setStep] = useState(0);
  const [selectedChild, setSelectedChild] = useState(null);
  const [selectedState, setSelectedState] = useState(null);
  const [currentTip, setCurrentTip] = useState(null);
  const [currentIcon, setCurrentIcon] = useState('üéÅ'); 
  const [isAnimating, setIsAnimating] = useState(false);
  const [displayedChecks, setDisplayedChecks] = useState({ body: [], emotion: [], brain: [] });
  const [checkedCount, setCheckedCount] = useState(0);
  const [showToast, setShowToast] = useState(false);
  
  // --- ÂúñÁâáË®≠ÂÆö ---
  // ÊèõÂõûÊÇ®ÁöÑÂé≠‰∏ñÂ™ΩÂí™ÂúñÈÄ£Áµê
  const defaultImage = "https://lh3.googleusercontent.com/d/1zbO02DurlPSmMLnipgPxp3fqrWtcLoWt";
  // ÂÇôÁî®ÂúñÂÉÖÂú®ÈÄ£ÁµêÂ§±ÊïàÊôÇÈ°ØÁ§∫
  const fallbackImage = "https://images.unsplash.com/photo-1618588507085-c79565432917?q=80&w=1000&auto=format&fit=crop"; 
  
  const [userImage, setUserImage] = useState(defaultImage);
  const fileInputRef = useRef(null);

  // --- Ë≥áÊñôÂ∫´: ËÅñË™ïÁØÄÁâπÂà•Áâà ---
  const childTypes = [
    { id: 1, name: 'Á¶ÆÁâ©ÂåÖË£ùÊíïË£ÇËÄÖ', desc: 'Â¶≥ÂåÖ‰∫Ü‰∏âÂ∞èÊôÇÁöÑÁ≤æÁæéÁ¶ÆÁâ©Ôºå‰ªñ‰∏âÁßíÈêòÂ∞±ÊíïÁàõÔºåÂè™Â∞çÁÆ±Â≠êÊÑüËààË∂£„ÄÇ', icon: 'üéÅ' },
    { id: 2, name: 'ËÅñË™ïÊ®πÊé®ÂÄíÊâã', desc: 'ÂÆ∂Ë£°ÁöÑËÅñË™ïÊ®πÊòØ‰ªñÁöÑÂÅáÊÉ≥ÊïµÔºåÊéõÈ£æÊòØ‰ªñÁöÑÊâãÊ¶¥ÂΩà„ÄÇ', icon: 'üéÑ' },
    { id: 3, name: 'Á≥ñÈúú‰∫¢Â•ÆÁ≤æÈùà', desc: 'ÊîùÂèñ‰∫ÜÈÅéÈáèËñëÈ§Ö‰∫∫ÂíåÁ≥ñÊûúÔºåÁèæÂú®ËôïÊñºÂÖâÈÄüÁßªÂãïÁãÄÊÖãÔºåÁÑ°Ê≥ïÁù°Ë¶∫„ÄÇ', icon: 'üç™' },
    { id: 4, name: 'ËÅñË™ïËÄÅ‰∫∫Êá∑ÁñëË´ñËÄÖ', desc: '„ÄåÂ¶ÇÊûú‰∏ç‰πñËÅñË™ïËÄÅ‰∫∫Â∞±‰∏ç‰æÜ„ÄçÈÄôÊãõÂ∞ç‰ªñÊ≤íÁî®Ôºå‰ªñÂ∑≤Á∂ìÁúãÁ©øÂ¶≥ÁöÑÈå¢ÂåÖ‰∫Ü„ÄÇ', icon: 'üéÖ' },
    { id: 5, name: 'Ê¥æÂ∞çÊÅêÊáºËßíËêΩÁîüÁâ©', desc: 'Ë¶™Êàö‰∏Ä‰æÜÂ∞±Â¥©ÊΩ∞Â§ßÂì≠ÔºåÂ†ÖÊåÅË¶ÅÈªèÂú®Â¶≥Ë∫´‰∏äÁï∂ÁÑ°Â∞æÁÜäÊéõÈ£æ„ÄÇ', icon: 'üê®' },
    { id: 6, name: 'Ë®±È°òÊ∏ÖÂñÆÂº∑Áõú', desc: 'È°òÊúõÊ∏ÖÂñÆÊØîË≥ºÁâ©ÁØÄÁõÆÈåÑÈÇÑÈï∑Ôºå‰∏çË≤∑Â∞±Âú®ÁôæË≤®ÂÖ¨Âè∏Âú∞‰∏äÊâìÊªæ„ÄÇ', icon: 'üìù' },
    { id: 7, name: '‰∫§ÊèõÁ¶ÆÁâ©Â´åÊ£ÑÁéã', desc: 'Áï∂ÁúæÂ§ßËÅ≤Ë™™„ÄåÈÄôÂÄãÂ•ΩÁàõÂñîÊàë‰∏çË¶Å„ÄçÔºåËÆìÂ™ΩÂ™ΩÊÉ≥Áï∂Â†¥ÈëΩÂú∞Ê¥û„ÄÇ', icon: 'ü§ê' },
    { id: 8, name: 'ÂÖ®ÂÆ∂Á¶èÁ†¥Â£ûËÄÖ', desc: 'ÂÖ®ÂÆ∂ÈÉΩÁúãÈè°È†≠Á¨ëÔºåÂè™Êúâ‰ªñÈñâÁúº„ÄÅÊåñÈºªÂ≠îÊàñÊØî‰∏≠Êåá„ÄÇ', icon: 'üì∏' },
    { id: 9, name: 'ÁØÄÊó•ÊÑüÂÜíÂÇ≥Êí≠ËÄÖ', desc: '‰∏ÄÂÆöË¶ÅÈÅ∏Âú®ËÅñË™ïÂ§úÁôºÈ´òÁáíÔºåËÆìÂ¶≥ÁöÑËÅñË™ïÂ§ßÈ§êËÆäÊàêÊÄ•Ë®∫ÂÆ§‰æøÁï∂„ÄÇ', icon: 'ü§í' },
    { id: 10, name: 'ÈõªÊ±†ÁµÇÁµêËÄÖ', desc: 'ÊâÄÊúâÁôºÂÖâÁôºËÅ≤ÁöÑÁé©ÂÖ∑ÈÉΩË¢´Áé©Âà∞Ê≤íÈõªÔºåÂÆ∂Ë£°ÂÖÖÊªø‰∫ÜË©≠Áï∞ÁöÑ‰ΩéÈõªÈáèÈü≥Êïà„ÄÇ', icon: 'üîã' },
    { id: 11, name: 'ÁçµÈ≠îÂ•≥ÂúòÁãÇÊ®ÇÁ≤â', desc: 'ÊØèÂ§©Ë¶ÅËÅΩSoda popÂÖ´ÁôæÊ¨°Ôºå‰∏çÂî±Â∞±Â∞ñÂè´„ÄÇ', icon: 'üé§' },
    { id: 12, name: 'ÂçàÂ§ú‰∏çÁù°Ë¶∫Á≥æÂØüÈöä', desc: 'ÂçäÂ§ú‰∏âÈªûÁà¨Ëµ∑‰æÜÊ™¢Êü•ËÅñË™ïËÄÅ‰∫∫‰æÜ‰∫ÜÊ≤íÔºåÁµêÊûúÊäìÂà∞Ê≠£Âú®ÂêÉÈ§Ö‰πæÁöÑÁà∏Áà∏„ÄÇ', icon: 'üïµÔ∏è' },
  ];

  const momStates = [
    { id: 1, level: 'hyper', name: 'ÁÉ§ÁÑ¶ÁöÑÁÅ´Èõû', icon: 'ü¶É', desc: 'Â§ñË°®ÁúãËµ∑‰æÜÂæàÂ†ÖÂº∑ÔºåÂÖßÂøÉÂ∑≤Á∂ìÁÑ¶ÈªëÔºåÈö®ÊôÇÊúÉÊï£ÁôºÂá∫ÁáíÁÑ¶ÁöÑÊÄíÊ∞£„ÄÇ', color: 'from-red-900 to-red-950 text-red-100 border-red-800' },
    { id: 2, level: 'hyper', name: 'Á∫è‰ΩèÁöÑÁáà‰∏≤', icon: 'üí°', desc: 'ÊÄùÁ∑íÂÉèÊâìÁµêÁöÑÁáà‰∏≤‰∏ÄÊ®£Ëß£‰∏çÈñãÔºåÁêÜÊô∫Á∑öÁ≥æÁ∫èÂú®‰∏ÄËµ∑Ôºå‰∏ÄÁ¢∞Â∞±Á¢é„ÄÇ', color: 'from-orange-800 to-amber-900 text-orange-100 border-orange-800' },
    { id: 3, level: 'hyper', name: 'Êö¥Ë∫ÅÁöÑÈ∫ãÈπø', icon: 'ü¶å', desc: 'Â∑•‰ΩúÈáèÈÅéÂ§ßÔºåÈÇÑË¶ÅÊãâËëóÂÖ®ÂÆ∂ÈÄôÂè∞Á†¥ËªäÂâçÈÄ≤ÔºåÂæàÊÉ≥Ë∏¢È£õË∑Ø‰∫∫„ÄÇ', color: 'from-yellow-800 to-amber-950 text-amber-100 border-amber-800' },
    { id: 4, level: 'optimal', name: 'ÁúºÁ•ûÊ≠ªÁöÑËÅñË™ïÂ©ÜÂ©Ü', icon: 'üëµ', desc: 'Â∑≤Á∂ìÁúãÁ†¥Á¥ÖÂ°µÔºåÂè™ÊÉ≥ÊääËÅñË™ïË•™Êãø‰æÜË£ùÁ¥ÖÈÖíÂñù„ÄÇ', color: 'from-emerald-900 to-green-950 text-emerald-100 border-emerald-800' },
    { id: 5, level: 'optimal', name: 'ÂåÖË£ùÁ¥ôÊú®‰πÉ‰ºä', icon: 'ü©π', desc: 'Ë¢´Áë£‰∫ãÁ∫èË∫´Ôºå‰ΩÜÂãâÂº∑ÈÇÑËÉΩÁ∂≠ÊåÅ‰∫∫ÂΩ¢ÔºåÊ©üÊ¢∞ÂºèÂú∞ÂõûÊáâ„ÄåÂ•ΩÊ£íÂñî„Äç„ÄÇ', color: 'from-teal-900 to-emerald-950 text-teal-100 border-teal-800' },
    { id: 6, level: 'hypo', name: 'ËûçÂåñÁöÑÈõ™‰∫∫', icon: 'ü´†', desc: 'È´îÂäõËÄóÁõ°ÔºåÂè™ÊÉ≥Áô±Âú®ÊöñÁàêÔºàÊàñÂú∞ÊùøÔºâÂâçÔºåÊÖ¢ÊÖ¢ËÆäÊàê‰∏ÄÁÅòÊ∞¥„ÄÇ', color: 'from-blue-900 to-slate-900 text-blue-100 border-blue-800' },
    { id: 7, level: 'hypo', name: 'ÂÜ¨Áú†ÁöÑÁÜä', icon: 'üêª', desc: '‰∏çÁÆ°Â§ñÈù¢ËÅñË™ïÊ≠åÂ§öÂ§ßËÅ≤ÔºåÂ¶≥ÁèæÂú®Âè™ÊÉ≥Áù°Âà∞ÊòéÂπ¥Êò•Â§©„ÄÇ', color: 'from-amber-950 to-orange-950 text-amber-100 border-amber-900' },
    { id: 8, level: 'hypo', name: 'Ë¢´ÈÅ∫ÂøòÁöÑËñëÈ§Ö‰∫∫', icon: 'ü´•', desc: 'Ë¶∫ÂæóËá™Â∑±ÂÉèÁº∫‰∫Ü‰∏ÄÈöªËÖ≥ÁöÑËñëÈ§Ö‰∫∫ÔºåÂèà‰πæÂèàÁ°¨ÔºåÊ≤í‰∫∫ÁñºÊÑõ„ÄÇ', color: 'from-slate-800 to-gray-950 text-slate-200 border-slate-700' },
  ];

  const awarenessChecks = useMemo(() => [
    { cat: 'body', text: 'Â¶≥ÁöÑËÇ©ËÜÄÁèæÂú®ÊòØ‰∏çÊòØÂÉèÊéõ‰∫ÜÂÖ©ÈöªÁÅ´Èõû‰∏ÄÊ®£ÈáçÔºüÊîæ‰∏ãÂÆÉ„ÄÇ' },
    { cat: 'body', text: 'ÁâôÈóúÊòØ‰∏çÊòØÂí¨ÂæóÊØîÊ†∏Ê°ÉÈâóÂ®ÉÂ®ÉÈÇÑÁ∑äÔºüÈ¨ÜÈñã„ÄÇ' },
    { cat: 'body', text: 'Â¶≥ÁèæÂú®ÂëºÂê∏ÊòØÂÅúÊªØÁöÑÂóéÔºüÊ∑±Âê∏‰∏ÄÂè£ÂÜ¨Â§©ÁöÑÂÜ∑Á©∫Ê∞£„ÄÇ' },
    { cat: 'body', text: 'ÊÑüË¶∫‰∏Ä‰∏ãËÖ≥Â∫ïÔºåÊòØ‰∏çÊòØÂÜ∞ÂÜ∞ÁöÑÔºüÂéªÁ©øÈõôË•™Â≠êÂêß„ÄÇ' },
    { cat: 'body', text: 'ËÉÉÊòØ‰∏çÊòØÂ°ûÊªø‰∫ÜÂâ©ËèúÊàñËÄÖÂ£ìÂäõÔºü' },
    { cat: 'body', text: 'Â¶≥ÁèæÂú®ÁúºÁ•ûÊòØÊÖàÁ••ÁöÑÔºåÈÇÑÊòØÂÖÖÊªøÊÆ∫Ê∞£ÁöÑÔºü' },
    { cat: 'emotion', text: 'ËÉ∏Âè£ÈÇ£ÂúòÊÇ∂Ê∞£ÔºåÊòØ‰∏çÊòØÊÉ≥ÊääÂÆÉÁï∂Á¶ÆÁâ©ÈÄÅÁµ¶ËÄÅÂÖ¨Ôºü' },
    { cat: 'emotion', text: 'Â¶≥ÁèæÂú®Ë¶∫ÂæóÂßîÂ±àÂóéÔºü(ÂÅöÈÄôÈ∫ºÂ§öÂçªÊ≤í‰∫∫ÊÑüË¨ù)' },
    { cat: 'emotion', text: 'Â¶ÇÊûúÊÜ§ÊÄíÊòØÁ¥ÖËâ≤ÔºåÂ¶≥ÁèæÂú®Â§ßÊ¶ÇÊòØËÅñË™ïÁ¥ÖÁöÑÈ°èËâ≤„ÄÇ' },
    { cat: 'emotion', text: 'ÂÖÅË®±Ëá™Â∑±ÁèæÂú®Â∞±ÊòØË®éÂé≠ÈÅéÁØÄ„ÄÇ' },
    { cat: 'emotion', text: 'ÈÇ£ËÇ°ÊÉ≥Âì≠ÁöÑÊÑüË¶∫ÔºåÂèØ‰ª•ËÆìÂÆÉÂÉèËûçÈõ™‰∏ÄÊ®£ÊµÅÂá∫‰æÜÂóéÔºü' },
    { cat: 'emotion', text: 'Â¶≥ÊòØ‰∏çÊòØË¶∫Âæó„ÄåÂè™ÊúâÊàëÂú®Âøô„ÄçÔºü' },
    { cat: 'brain', text: 'ËÖ¶‰∏≠ÊòØ‰∏çÊòØÂú®ÈáçÊí≠„ÄåÊòéÂπ¥ÁöÑËÅñË™ïÁØÄÊàëÁµïÂ∞ç‰∏çË¶ÅÈÄôÈ∫ºÁ¥Ø„ÄçÔºü' },
    { cat: 'brain', text: 'ÊìîÂøÉ„ÄåÂ≠©Â≠êÊ≤íÊãøÂà∞ÂøÉÂÑÄÁ¶ÆÁâ©ÊúÉÊúâÈô∞ÂΩ±„ÄçÔºü(Âà•ÂÇª‰∫Ü)' },
    { cat: 'brain', text: 'Ë¶∫ÂæóÈÄôÂÄãÊ∑∑‰∫ÇÊòØ„ÄåÂ¶≥ÁöÑÈåØ„ÄçÂóéÔºü(‰∏çÔºåÈÄôÊòØÁØÄÊó•ÁöÑÈåØ)' },
    { cat: 'brain', text: 'Â¶≥ÁèæÂú®ÊÄ•ËëóË¶ÅÊääÂÆ∂Ë£°ÂºÑÂæóÂÉèPinterestÁÖßÁâá‰∏ÄÊ®£ÂÆåÁæéÂóéÔºü' },
    { cat: 'brain', text: 'Ë©¶ËëóÊääÂøÉ‰∏≠ÁöÑ„ÄåÊàëÂøÖÈ†à„ÄçÊîπÊàê„ÄåÁÆ°‰ªñÁöÑ„Äç„ÄÇ' },
    { cat: 'brain', text: 'ÁúãÁúãÂë®ÂúçÔºåÂÖ∂ÂÆûÊàøÂ≠êÈÇÑÊ≤íÁáíËµ∑‰æÜÔºåÂ∞±ÊòØÂ•Ω‰∫ã„ÄÇ' },
  ], []);

  const survivalTips = [
    "Áî®ÂÜ∑Ê∞¥Ê¥óËáâ„ÄÇÂÅáË£ùÂ¶≥ÊòØËâæËééÂ•≥ÁéãÔºåÂÜ∞ÂÜ∑ËÉΩÂà∫ÊøÄËø∑Ëµ∞Á•ûÁ∂ìÔºåÂº∑Âà∂ÂÜ∑ÈùúÔºàÈ†Ü‰æøÁ∑äÁ∑ªÊØõÂ≠îÔºâ„ÄÇ",
    "Êâæ 5 ÂÄãÁ¥ÖËâ≤ÁöÑÊù±Ë•ø„ÄÇ‰∏çÊòØÂè´Â¶≥ÁúãÈÇ£ÂÄãÊú™Êé•‰æÜÈõªÔºåÊòØÁúãÁúãÂë®ÂúçÁöÑË£ùÈ£æÔºåËÆìÂâçÈ°çËëâÈáçÊñ∞ÈñãÊ©ü„ÄÇ",
    "ÈõôËÖ≥Áî®ÂäõË∏©Âú∞Êùø„ÄÇÁ¢∫Ë™çÂ¶≥ÈÇÑÂú®Âú∞ÁêÉË°®Èù¢ÔºåÊ≤íÊúâË¢´ÈÄô‰∫õÂ∞èÊÉ°È≠îÊ∞£Âà∞È£õ‰∏äÂ§©„ÄÇ",
    "ËÅû‰∏Ä‰∏ãÈÇ£Ê£µÂæàË≤¥ÁöÑËÅñË™ïÊ®πÔºàÊàñÊóÅÈÇäÁöÑÁÇ∏ÈõûÔºâ„ÄÇÂóÖË¶∫ÊòØÈÄöÂæÄÂ§ßËÖ¶ÊÉÖÊÑü‰∏≠ÂøÉÊúÄÂø´ÁöÑÊç∑ÂæëÔºåÂê∏ÁàÜÂÆÉ„ÄÇ",
    "Âñù‰∏ÄÂè£ÂÜ∞Ê∞¥ÔºåÂê´‰Ωè 10 Áßí„ÄÇÊÉ≥ÂÉèÈÇ£ÊòØÊääÂ¶≥ÊÄíÁÅ´ÊæÜÁÜÑÁöÑËÅñÊ∞¥„ÄÇ",
    "Áî®ÂäõÊãçÊãçËá™Â∑±ÁöÑÊâãËáÇÔºàËù¥Ëù∂ÊìÅÊä±Ê≥ïÔºâ„ÄÇÂëäË®¥Ëá™Â∑±Ôºö„ÄåÊàëÂú®ÈÄôË£°ÔºåÊàëÈÇÑÊ≤íÂõ†ÈÅéÂãûËÄåÊ≠ª„ÄÇ„Äç",
    "Êè°Êã≥ 5 ÁßíÔºåÂÜçÁû¨ÈñìÊîæÈ¨Ü„ÄÇÊääÊÉ≥ÊéêÊ≠ªËÅñË™ïËÄÅ‰∫∫ÁöÑÂäõÊ∞£ÈáãÊîæÊéâÔºåÊâãÊéåË°ÄÊ∂≤ÂõûÊµÅÊúÉËàíÊúçÈªû„ÄÇ",
    "Êà¥‰∏äÊäóÂô™ËÄ≥Ê©ü„ÄÇÂÅáË£ùÈÄôÊòØ‰∏ÄÈÉ®ÈªòÂäáÔºåÈÄô‰∫õÂ≠©Â≠êÁöÑÂ∞ñÂè´Âè™ÊòØËÉåÊôØÈõúÈü≥„ÄÇ",
    "Êë∏Êë∏ÂÆ∂Ë£°ÁöÑË≤ìÊàñÈÇ£Ê¢ùËß∏ÊÑüÂæàÂ•ΩÁöÑÊØØÂ≠ê„ÄÇÈÄôÊòØÂêàÊ≥ïÁöÑÂÇ¨Áî¢Á¥†‰æÜÊ∫êÔºåÊØîËÄÅÂÖ¨ÈÇÑÊúâÁî®„ÄÇ",
    "Èù†ËëóÁâÜÂ£ÅÁ´ôËëó„ÄÇÁâÜÂ£Å‰∏çÊúÉÂÄíÔºåÂ¶≥‰πü‰∏çÊúÉ„ÄÇÊÑüÂèóËÉåÂæåÁöÑÊîØÊíêÔºåÂ¶≥‰∏çÈúÄË¶Å‰∏ÄÂÄã‰∫∫ÊâõÂÖ®ÂÆ∂„ÄÇ",
    "ÊâøË™çÂêßÔºåÂ¶≥ÁèæÂú®Â∞±ÊòØÊÉ≥ÊääËÅñË™ïÊ®πÁáí‰∫Ü„ÄÇÊé•Á¥çÈÄôÁ®ÆÁ†¥Â£ûÊÖæÔºåÂè™Ë¶Å‰∏çÁúüÁöÑÈªûÁÅ´Â∞±Â•Ω„ÄÇ",
    "Â¶≥ÁèæÂú®„ÄåËÖ¶ÂÆπÈáèË∂ÖËºâ„Äç‰∫Ü„ÄÇÊö´ÂÅú‰∏Ä‰∏ãÔºåÂéªÂªÅÊâÄÊªëÊâãÊ©ü‰∏çÊòØÂÅ∑Êá∂ÔºåÊòØÁ≥ªÁµ±Á∂≠Ë≠∑„ÄÇ",
    "Êë∏Êë∏ËÉ∏Âè£„ÄÇÂ∞çÂÖßÂøÉÈÇ£ÂÄãÂ¥©ÊΩ∞ÁöÑÂ∞èÂ•≥Â≠©Ë™™Ôºö„Äå‰πñÔºåÁ≠â‰∏ãÊàëÂÄëÂ∞±ÂéªÂñù‰∏ÄÊùØ„ÄÇ„Äç",
    "ÂÖÅË®±Ëá™Â∑±Â∞çÈÄôÂÄãÁØÄÊó•ÊÑüÂà∞Â§±Êúõ„ÄÇIG ‰∏äÁöÑÂÆåÁæéÂÆ∂Â∫≠ÈÉΩÊòØ‰øÆÂúñ‰øÆÂá∫‰æÜÁöÑ„ÄÇ",
    "ÂëäË®¥Ëá™Â∑±Ôºö„ÄåÂÅöÂæóÂ§†Â•ΩÂ∞±Ë°å„Äç„ÄÇËÅñË™ïÂ§ßÈ§êÂêÉÂ§ñÈÄÅÊä´Ëñ©ÔºåÂ≠©Â≠ê‰∏ÄÊ®£ÊúÉÈï∑Â§ß„ÄÇ",
    "ÂéüË´íÂâõÂâõÂ§±ÊéßÂêºÂè´ÁöÑËá™Â∑±„ÄÇÂ¶≥‰πüÊòØÁ¨¨‰∏ÄÊ¨°Áï∂ÈÄôÂÄãÂìÅÁ®ÆÊÄ™Áç∏ÁöÑÂ™Ω„ÄÇ",
    "Â¶≥‰∏çÈúÄË¶ÅÁÇ∫ÂÖ®ÂÆ∂‰∫∫ÁöÑÂø´Ê®ÇË≤†Ë≤¨„ÄÇÂ¶ÇÊûú‰ªñÂÄë‰∏çÂø´Ê®ÇÔºåÈÇ£ÊòØ‰ªñÂÄë‰øÆÈ§ä‰∏çÂ§†„ÄÇ",
    "ÊÉ≥Âì≠Â∞±Âì≠Âêß„ÄÇÁúºÊ∑öÊòØË∫´È´îÊéíÊØíÁöÑÊñπÂºèÔºåÂì≠ÂÆåË®òÂæóË£úÂ¶ùÂ∞±Â•Ω„ÄÇ",
    "ÊääÂøÉ‰∏≠ÁöÑ„ÄåÊàëÂøÖÈ†à„ÄçÊîπÊàê„ÄåÁúãÂøÉÊÉÖ„Äç„ÄÇÊâæÂõû‰∏ÄÈªûÂ•≥ÁéãÁöÑÊéßÂà∂ÊÑü„ÄÇ",
    "Â¶ÇÊûúÁèæÂú®Ë¶∫ÂæóÈùàÈ≠ÇÂá∫Á´ÖÔºåÂí¨‰∏ÄÈ°ÜÂÜ∞Â°ä„ÄÇÁóõË¶∫ÊúÉÊääÂ¶≥ÊãâÂõûÁèæÂØ¶ÔºàÈõñÁÑ∂ÁèæÂØ¶ÂæàÊÆòÈÖ∑Ôºâ„ÄÇ",
    "ÂéªÂªÅÊâÄÈéñÈñÄ„ÄÇÈÄôÊòØÂÆ∂Ë£°ÂîØ‰∏ÄÁöÑÊ∑®ÂúüÔºåÂÆ£Á®±ËÅñË™ïËÄÅÂÖ¨ÂÖ¨Ê≠£Âú®Ë∑üÂ¶≥ÈÄ≤Ë°åÁßòÂØÜË¶ñË®ä„ÄÇ",
    "ÊãíÁµïÈÇ£ÂÄãÁÖ©‰∫∫ÁöÑË¶™ÊàöËÅöÊúÉ„ÄÇÂ∞±Ë™™Â¶≥Âæó‰∫Ü„ÄåÁ§æ‰∫§ÊÅêÊáºÂûãÊµÅÊÑü„ÄçÔºåÂÇ≥ÊüìÂäõÊ•µÂº∑„ÄÇ",
    "Â∞çÂ≠©Â≠êË™™Ôºö„ÄåÂ™ΩÂ™ΩÁèæÂú®ÂÉèÊ≤íÈõªÁöÑÁé©ÂÖ∑„ÄÇ„ÄçÁÑ∂ÂæåÁõ¥Êé•Ë∫∫Âú®Âú∞‰∏äË£ùÊ≠ª‰∫îÂàÜÈêò„ÄÇ",
    "ÊääÁáàÂÖâË™øÊöó„ÄÇÂ§™‰∫ÆÁöÑÂÖâÁ∑öÂè™ÊúÉËÆìÂ¶≥Êõ¥Ê∏ÖÊ•öÁúãÂà∞Âú∞‰∏äÁöÑÂûÉÂúæ„ÄÇ",
    "Ë∫≤ÈÄ≤Ë°£Ê´•Ë£°„ÄÇÁãπÂ∞èÁöÑÁ©∫ÈñìËÉΩÂ∏∂‰æÜÂÆâÂÖ®ÊÑüÔºåÈ†Ü‰æøÊ™¢Êü•ÊúâÊ≤íÊúâÁßÅÊàøÈå¢„ÄÇ",
    "ÊääÁÖ©ÊÉ±ÂØ´Âú®Á¥ô‰∏äÔºåÁÑ∂ÂæåÊíïÁàõÂÆÉ„ÄÇÂ¶ÇÊûúËÉΩÊîæÈÄ≤Á¢éÁ¥ôÊ©üÔºåËÅ≤Èü≥ÊúÉÊõ¥ÁôÇÁôí„ÄÇ",
    "Êï¥ÁêÜ‰∏ÄÂÄãÂ∞èËßíËêΩÔºà‰æãÂ¶ÇÂ¶≥ÁöÑÂåñÂ¶ùÂè∞Ôºâ„ÄÇËá≥Â∞ëÈÄôÂÄãÂÆ∂Ë£°Êúâ‰∏ÄÂÄãÂú∞ÊñπÊòØËÅΩÂ¶≥ÊåáÊèÆÁöÑ„ÄÇ",
    "ÊÉ≥ÂÉè‰∏ÄÂÄãÈò≤Ë≠∑ÁΩ©„ÄÇÂ©ÜÂ©ÜÁöÑÁ¢éÂøµÂíåÂ≠©Â≠êÁöÑÂ∞ñÂè´ÈÉΩÊúÉË¢´ÂΩàÈñãÔºåÂ¶≥ÊòØÁÑ°ÊïµÁöÑ„ÄÇ",
    "Ë™™Ë©±ËÆäÊÖ¢‰∏ÄÈªû„ÄÇÈÄôËÉΩÈ®ôÈÅéÂ§ßËÖ¶‰ª•ÁÇ∫ÁèæÂú®ÂæàÊÇ†ÈñíÔºåÈõñÁÑ∂ÂÖ∂ÂØ¶Â¶≥ÂøÉÊÄ•Â¶ÇÁÑö„ÄÇ",
    "ÈñãÈõªË¶ñÁµ¶Â≠©Â≠êÁúã„ÄÇÈÄô‰∏çÊòØÊá∂ÊÉ∞ÔºåÈÄôÊòØÁÇ∫‰∫Ü‰∏ñÁïåÂíåÂπ≥ËÄå‰ΩøÁî®ÁöÑ„ÄåÈõªÂ≠ê‰øùÊØç„Äç„ÄÇ",
    "ÊääÂ≠©Â≠êÁöÑÂì≠È¨ßÁï∂Êàê„ÄåÊ±ÇÊïëË®äËôü„Äç„ÄÇ‰ªñÂú®Ë™™Ôºö„ÄåÂ™ΩÔºÅÊàëÁöÑËÖ¶Ë¢ãÁï∂Ê©ü‰∫ÜÔºÅ„Äç‰∏çÊòØÈáùÂ∞çÂ¶≥„ÄÇ",
    "ÈªòÂøµÂííË™ûÔºö„ÄåÈÄô‰∏ÄÂàáÈÉΩÊúÉÈÅéÂéª„ÄÇ„ÄçËÅñË™ïÁØÄ‰∏ÄÂπ¥Âè™Êúâ‰∏ÄÂ§©ÔºåÊòéÂ§©Â∞±ÊòØÊôÆÈÄöÁöÑÂú∞ÁçÑ‰∫Ü„ÄÇ",
    "ÂçÄÂàÜ„Äå‰∫ãÂØ¶„ÄçËàá„ÄåÊÅêÊáº„Äç„ÄÇ‰∫ãÂØ¶ÊòØ‰ªñÂú®Âì≠ÔºåÊÅêÊáºÊòØ‰ªñÈï∑Â§ßÊúÉËÆäÊàêÊõ¥Áîü‰∫∫„ÄÇÂ∞àÊ≥®‰∫ãÂØ¶Â∞±Â•Ω„ÄÇ",
    "‰ªäÂ§©ÁöÑÁõÆÊ®ôÔºöÂ§ßÂÆ∂ÈÉΩÊ¥ªËëóÔºåÊàøÂ≠êÊ≤íÁáíÊéâ„ÄÇÈÄôÂ∞±ÊòØÂ∑®Â§ßÁöÑÂãùÂà©ÔºåÂÄºÂæóÂñù‰∏ÄÊùØ„ÄÇ",
    "‰∏çË¶ÅÁèæÂú®Ëß£Ê±∫ÂïèÈ°å„ÄÇÂª∂ÂæåËôïÁêÜÊòØÁ®ÆÊô∫ÊÖßÔºåÊàñÊòØË™™ÔºåÊòØ‰∏ÄÁ®ÆÈÄÉÈÅøÁöÑÂèØÊÅ•‰ΩÜÊúâÁî®„ÄÇ",
    "ÊÉ≥ÂÉèÂ¶≥ÊòØÂØ¶Â¢ÉÁßÄ„ÄäÁòãÁãÇ‰∏ªÂ©¶„ÄãÁöÑËßÄÁúæ„ÄÇÁúãËëóÁúºÂâçÁöÑËçíË¨¨ÂäáÔºåÂÖ∂ÂØ¶Ë†ªÂ•ΩÁ¨ëÁöÑ„ÄÇ",
    "ÂÇ≥Ë®äÊÅØÁµ¶Èñ®ËúúÔºö„ÄåÊàëÂø´‰∏çË°å‰∫Ü„ÄÇ„ÄçÂè™Ë¶ÅÊúâ‰∫∫Áü•ÈÅìÂ¶≥Âú®ÂèóËã¶ÔºåÁóõËã¶Â∞±ÊúÉÊ∏õÂçä„ÄÇ",
    "Â¶≥ÁöÑËÄêÂøÉÂÉèÊâãÊ©üÈõªÈáèÔºåÁèæÂú®Âè™Ââ© 1%„ÄÇÈÄôÊôÇÂÄôÈñãÂïüÁúÅÈõªÊ®°ÂºèÔºàÈñâÂò¥‰∏çË™™Ë©±ÔºâÂæàÂêàÁêÜ„ÄÇ",
    "Á¶ÆÁâ©‰∏ç‰ª£Ë°®ÊÑõÁöÑÂÖ®ÈÉ®„ÄÇÂ¶≥Ê≤íÊúâÈõ¢ÂÆ∂Âá∫Ëµ∞ÔºåÂ∞±ÊòØÁµ¶ÈÄôÂÄãÂÆ∂ÊúÄÊ£íÁöÑÁ¶ÆÁâ©„ÄÇ",
    "ÁúãËëóÊªøÂú∞ÁöÑÁé©ÂÖ∑ÔºåË∑®ÈÅéÂéª„ÄÇÊääÂÆÉÂÄëÁï∂ÊàêÁèæ‰ª£Ë£ùÁΩÆËóùË°ì„ÄåÊ∂àË≤ª‰∏ªÁæ©ÁöÑÊÆûËêΩ„Äç„ÄÇ",
    "ËÅñË™ïËÄÅÂÖ¨ÂÖ¨‰∏ÄÂπ¥Âè™Â∑•‰Ωú‰∏ÄÂ§©ÊòØÊúâÂéüÂõ†ÁöÑ„ÄÇÈÄôÁ®ÆÈ´òÂº∑Â∫¶ÁöÑÊ≠°Ê®ÇË™∞ÂèóÂæó‰∫ÜÔºü",
    "ËñëÈ§ÖÂ±ãÊúÄÂæåÈÉΩÊúÉÂÄíÂ°åÁöÑ„ÄÇÂ∞±ÂÉèÊàëÂÄëÁöÑËÜ†ÂéüËõãÁôΩÔºåÊé•ÂèóÂÆÉÔºå‰∫´ÂèóÂÆÉ„ÄÇ",
    "ÊíïÂåÖË£ùÁ¥ôÁöÑËÅ≤Èü≥ÊòØÂ≠©Â≠êÂ§ßËÖ¶ËààÂ•ÆÁöÑË°®Áèæ„ÄÇÈõñÁÑ∂ËÅΩËµ∑‰æÜÂÉèÂú®ÊíïÁ¢éÂ¶≥ÁöÑÂøÉË°Ä„ÄÇ",
    "ÈÇ£‰∫õÂÆåÁæéÁöÑÁ∂≤ÁæéÁÖßËÉåÂæåÔºåÈÄöÂ∏∏ÈÉΩÊúâ‰∏ÄÂÄãÂâõÂ¥©ÊΩ∞ÂÆåÁöÑÂ™ΩÂ™ΩÂíåË¢´Â®ÅËÑÖÁöÑÂ≠©Â≠ê„ÄÇ",
    "‰ªäÂπ¥ÁöÑÂõûÊÜ∂ÔºåÂèØËÉΩÂ∞±ÊòØÈÇ£ÂÄãÁÉ§ÁÑ¶ÁöÑÈõû„ÄÇ‰∏çÂÆåÁæéÊâçÊ∑±ÂàªÔºå‰ª•ÂæåÂ©öÁ¶ÆÊãø‰æÜË¨õÂâõÂ•Ω„ÄÇ",
    "Áî®„ÄåÂ•ΩÂ•áÂøÉ„ÄçÂèñ‰ª£„ÄåÂØ©Âà§„Äç„ÄÇÂ•ΩÂ•á‰∏Ä‰∏ãÔºåÁÇ∫‰ªÄÈ∫º‰∫∫È°ûÂπºÂ¥ΩÂèØ‰ª•ÈÄôÈ∫ºÂ§±ÊéßÔºü",
    "Áµ¶Ëá™Â∑±‰∏Ä‰ªΩÁ¶ÆÁâ©ÔºöÂçÅÂàÜÈêòÁöÑÁµïÂ∞çÂÆâÈùú„ÄÇÂì™ÊÄïÊòØÂú®ÂÑ≤ËóèÂÆ§Ë£°Ë∑üÊãñÊääÂ∞çÊúõ„ÄÇ",
    "Â¶≥ÊòØÂÆ∂Ë£°ÁöÑÊÅÜÊ∫´Âô®„ÄÇÂ¶≥ÂÜ∑Èùú‰∏ã‰æÜÔºåÂÆ∂Ë£°Ê∫´Â∫¶Â∞±ÊúÉÈôç‰∏ã‰æÜÔºàÊàñÊòØÁµêÂÜ∞Ôºå‰πü‰∏çÈåØÔºâ„ÄÇ",
    "Â¶ÇÊûúÁúüÁöÑÂèó‰∏ç‰∫ÜÔºåÂ∞±Ë∑üËëóÂ≠©Â≠ê‰∏ÄËµ∑Ë∫∫Âú∞‰∏äË∏¢ËÖø„ÄÇÂöáÂöá‰ªñÂÄëÔºåÂ±ïÁèæ‰∏Ä‰∏ãÂÆ∂Èï∑ÁöÑÂ®ÅÂö¥„ÄÇ",
    "ÊúÄÂæåÔºåÊ∑±ÂëºÂê∏ÔºåÊë∏Êë∏È†≠ÔºåÂ∞çËá™Â∑±Ë™™Ôºö„ÄåËæõËã¶‰∫ÜÔºåÈÄôË©≤Ê≠ªÁöÑÁØÄÊó•ÁµÇÊñºÂø´ÁµêÊùü‰∫Ü„ÄÇ„Äç"
  ];
  
  // Èö®Ê©üËÅñË™ïÂúñÊ®ôÂ∫´
  const christmasIcons = ['üéÅ', 'üéÑ', 'ü¶å', '‚õÑ', 'üîî', '‚≠ê', 'üïØÔ∏è', 'üç™'];

  // --- ÈÇèËºØÂáΩÊï∏ ---
  useEffect(() => {
    if (step === 3) {
      shuffleCategory('body');
      shuffleCategory('emotion');
      shuffleCategory('brain');
      setCheckedCount(0);
    }
  }, [step]);

  const shuffleCategory = (category) => {
    const items = awarenessChecks.filter(x => x.cat === category);
    const shuffled = [...items].sort(() => 0.5 - Math.random());
    const selected = shuffled.slice(0, 3);
    setDisplayedChecks(prev => ({
      ...prev,
      [category]: selected
    }));
  };

  const handleCheck = (e) => {
    if (e.target.checked) {
      setCheckedCount(prev => prev + 1);
    } else {
      setCheckedCount(prev => Math.max(0, prev - 1));
    }
  };

  const handleDraw = () => {
    setIsAnimating(true);
    setCurrentTip(null);
    setTimeout(() => {
      const randomTip = survivalTips[Math.floor(Math.random() * survivalTips.length)];
      const randomIcon = christmasIcons[Math.floor(Math.random() * christmasIcons.length)];
      setCurrentTip(randomTip);
      setCurrentIcon(randomIcon); // Ë®≠ÂÆöÈö®Ê©üÂúñÊ®ô
      setIsAnimating(false);
    }, 1200);
  };

  const handleImageUpload = (e) => {
    const file = e.target.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onloadend = () => {
        setUserImage(reader.result);
      };
      reader.readAsDataURL(file);
    }
  };

  const handleShare = async () => {
    const urlToShare = window.location.href;
    const shareData = {
      title: 'ËÅñË™ïÂä´Â™ΩÂí™ÁîüÂ≠òÊâ≠ËõãÊ©ü',
      text: 'ÁçªÁµ¶ÊØè‰∏ÄÂÄãÂú®ËÅñË™ïÁØÄÂ¥©ÊΩ∞ÈÇäÁ∑£ÁöÑÂ¶≥„ÄÇÈÄôË£°‰∏çÊïôÂ¶≥ÊÄéÈ∫ºÁÉ§ÁÅ´ÈõûÔºåÂè™ÊïôÂ¶≥ÊÄéÈ∫ºÊ¥ª‰∏ãÂéª„ÄÇ',
      url: urlToShare,
    };

    try {
      if (navigator.share) {
        await navigator.share(shareData);
        return;
      }
      await navigator.clipboard.writeText(urlToShare);
      setShowToast(true);
      setTimeout(() => setShowToast(false), 2500);
    } catch (err) {
      setShowToast(true); // Fallback for demo
      setTimeout(() => setShowToast(false), 2500);
    }
  };

  // --- Ê∏≤ÊüìÁï´Èù¢ ---

  const renderWelcome = () => (
    <div className="flex flex-col items-center justify-center min-h-[80vh] text-center p-6 animate-in fade-in duration-700 relative z-10">
